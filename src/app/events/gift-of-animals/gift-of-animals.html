<section class="hero">
  <div class="hero__overlay">
    <div class="hero__content">
      <h1 class="hero__title">Evenimente „Darul Animalelor”</h1>
      <p class="hero__subtitle">
        Descoperă întâlniri dedicate sănătății și echilibrului prietenilor noștri necuvântători, cu ajutorul uleiurilor esențiale doTERRA.
      </p>
      <p class="hero__highlight">
        Nu există niciun cost pentru participare – tot ce ai nevoie este iubirea pentru animale.
      </p>
      <button mat-flat-button (click)="scrollToEvents('smooth')">
        <div class="hero__button">
          <span>Vezi evenimentele</span><ng-icon name="remixArrowDownDoubleLine" size="2rem"></ng-icon>
        </div>
      </button>
    </div>
  </div>
</section>

<div class="container">
  <section class="about">
    <h2 class="about__title">Despre Evenimentele „Darul Animalelor”</h2>
    <p class="about__text">
      Evenimentele noastre sunt create pentru a oferi 
      <strong>sprijin, inspirație și soluții naturale pentru îngrijirea animalelor de companie.</strong>
      În fiecare lună alegem o temă dedicată și aducem împreună 
      <strong>experiențe reale și idei practice</strong> pentru integrarea 
      uleiurilor esențiale în viața și sănătatea animalelor.
    </p>
    <p class="about__text">
      Vei găsi aici <strong>testimoniale inspiraționale de la stăpâni care au avut rezultate minunate cu animalele lor</strong>, 
      soluții simple și utile pentru bunăstarea fizică și emoțională a acestora și bucuria de a face parte 
      dintr-o comunitate caldă și deschisă, unită prin dragostea față de animale.
    </p>
  </section>

  <section #eventsSection class="events">
    <h2 class="events__title">Evenimentele noastre</h2>
    <div class="events__tabs">
      <button
        class="events__tabs__button"
        [class.active]="activeTab === 0"
        (click)="setActiveTab(0)"
      >
        Evenimente Viitoare
      </button>
      <button
        class="events__tabs__button"
        [class.active]="activeTab === 1"
        (click)="setActiveTab(1)"
      >
        Evenimente din Trecut
      </button>
    </div>

    @let viewDetails = viewEventDetails$ | async;
    @if (viewDetails && selectedEventData) {
      <div @cardDetail>
        <button class="back-btn" (click)="closeEventDetails()">
          <ng-icon name="remixArrowLeftLongLine" size="2.8rem"></ng-icon>
          <span class="back-btn__text">Înapoi</span>
        </button>
        <app-event
          [image]="selectedEventData.imageLarge"
          [title]="selectedEventData.title"
          [online]="selectedEventData.online"
          [date]="selectedEventData.date"
          [hosts]="selectedEventData.hosts"
          [description]="selectedEventData.description"
          [whatsAppGroup]="selectedEventData.whatsAppGroup"
          [physicalLocation]="selectedEventData.physicalLocation"
          [zoom]="selectedEventData.zoom"
        ></app-event>
      </div>
    }
    @else {
      @let vm = vm$ | async;
      @if (activeTab === 0 && vm) {
        @if (!(vm | filterEvents: 'future').length) {
          <div class="events__items__empty-state">
            <mat-icon class="events__items__empty-state__icon">event_busy</mat-icon>
            <div class="events__items__empty-state__text">
              <p>Momentan nu sunt evenimente viitoare.</p>
              <p>Poți vedea evenimentele din trecut.</p>
            </div>
          </div>
        }

        <div class="events__items">
          @for (event of vm | filterEvents: 'future'; track $index) {
            @if (!hideCard || pendingEvent?.id !== event.id) {
              <app-event-card
              [@cardSmall]="isTabSwitching ? 'tabSwitch' : 'default'"
              class="event-card"
              [event]="event"
              (@cardSmall.done)="onCardAnimationDone()"
              (cardClicked)="viewEventDetails($event)"
              ></app-event-card>
            }
          }
        </div>
        
      }
      @if (activeTab === 1 && vm) {
        @if (!(vm | filterEvents: 'past').length) {
          <div class="events__items__empty-state">
            <mat-icon class="events__items__empty-state__icon">event_busy</mat-icon>
            <div class="events__items__empty-state__text">
              <p>Momentan nu sunt evenimente din trecut.</p>
              <p>Poți vedea evenimentele din viitor.</p>
            </div>
          </div>
        }

        <div class="events__items">
          @for (event of vm | filterEvents: 'past'; track $index) {
            @if (!hideCard || pendingEvent?.id !== event.id) {
              <app-event-card
              [@cardSmall]="isTabSwitching ? 'tabSwitch' : 'default'"
              class="event-card"
              [event]="event"
              (@cardSmall.done)="onCardAnimationDone()"
              (cardClicked)="viewEventDetails($event)"
              ></app-event-card>
            }
          }
        </div>
      }
    }
  </section>
</div>

<section class="call-to-action">
  <div class="container">
    <h3 class="call-to-action__title">Vrei să descoperi mai multe?</h3>
    <p class="call-to-action__description">Poți începe prin a solicita mostre gratuite sau a te înscrie în comunitatea noastră pentru a beneficia de mai mult sprijin.</p>
    <div class="call-to-action__btn-wrapper">
      <button mat-flat-button routerLink="/contact">Contactează-ne</button>
      <button mat-flat-button routerLink="/inscrie-te">Înscrie-te</button>
    </div>
  </div>
</section>